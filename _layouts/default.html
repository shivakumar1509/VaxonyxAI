<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% if page.title %}{{ page.title }} Â· {% endif %}Vaxonyx</title>

  <link rel="preload" href="{{ '/assets/Vaxonyx.svg' | relative_url }}" as="image" type="image/svg+xml">
  <link rel="stylesheet" href="{{ '/css/styles.css?v=build-39' | relative_url }}" />

  <!-- Your inline tweaks (spacing, dropdown alignment, footer spacing) -->
  <style>
    :root{ --vx-blue:#1B427A; --vx-ink:#0b1b3a; --vx-line:#e6ebf4; --vx-orange:#F26B3B; }
    .site-header{ position:sticky; top:0; z-index:2000; background:#fff; border-bottom:1px solid var(--vx-line); height:68px; overflow:visible; }
    .header-row{ height:68px; display:flex; align-items:center; gap:16px; }
    .brand-logo{ height:42px; }
    .menu-toggle{ border:1px solid var(--vx-line); background:#fff; border-radius:10px; padding:.45rem .6rem; font-size:18px; display:none; }
    .site-nav{ margin-left:auto; }
    .menu{ display:flex; align-items:center; gap:28px; padding:0; margin:0; list-style:none; }
    .menu>li{ position:relative; }
    .menu>li>a,.menu .dropdown-link,.menu .submenu-link{ color:var(--vx-blue); text-decoration:none; font-weight:700; display:inline-flex; align-items:center; gap:6px; padding:8px 0; }
    .menu>li>a:hover{ text-decoration:underline; }
    .vx-fab{ border:0; border-radius:999px; padding:10px 14px; background:var(--vx-orange); color:#fff; font-weight:800; box-shadow:0 10px 22px rgba(242,107,59,.36); cursor:pointer; }
    .ai-inline{ display:none; }
    .vx-fab-desktop{ display:inline-flex; }

    /* Desktop dropdowns */
    @media (min-width:921px){
      .site-header{ overflow:visible !important; z-index:3000 !important; }
      .site-nav .menu>li.dropdown > .dropdown-menu{
        position:absolute !important; top:calc(100% + 10px) !important; left:50% !important; transform:translateX(-50%) !important;
        z-index:3100 !important; display:none; min-width:240px; background:#fff; border-radius:12px; padding:8px 0; box-shadow:0 10px 25px rgba(0,0,0,.12);
      }
      .site-nav .menu>li.dropdown:hover > .dropdown-menu,
      .site-nav .menu>li.dropdown:focus-within > .dropdown-menu{ display:block !important; }

      .site-nav .dropdown-menu .has-sub{ position:relative !important; }
      .site-nav .dropdown-menu .has-sub > .submenu{
        position:absolute !important; top:-8px !important; left:100% !important; display:none; min-width:220px; background:#fff; border-radius:10px; padding:8px 0; box-shadow:0 10px 25px rgba(0,0,0,.12);
      }
      .site-nav .dropdown-menu .has-sub:hover > .submenu,
      .site-nav .dropdown-menu .has-sub:focus-within > .submenu{ display:block !important; }
      .site-nav .dropdown-menu a{ display:block; padding:8px 12px; border-radius:8px; color:var(--vx-blue); font-weight:700; text-decoration:none; }
      .site-nav .dropdown-menu a:hover{ background:rgba(27,66,122,.08); }
    }

    /* Hero */
    .hero{ position:relative; overflow:hidden; background:linear-gradient(180deg,#3FA9F5 0%,#0d2a56 70%,#000 100%); min-height:64vh; display:flex; align-items:center; justify-content:center; }
    .hero-inner{ padding:100px 0; width:100%; text-align:center; }
    .hero-title{ color:#fff; font-weight:800; font-size:clamp(28px,5vw,56px); line-height:1.15; margin:0; opacity:0; transition:opacity 350ms ease; }

    /* Footer */
    .site-footer{ border-top:1px solid var(--vx-line); background:#f7f9fc; }
    .footer-grid{ display:grid; grid-template-columns:1.3fr 0.9fr 1.2fr; gap:32px; padding:32px 0; align-items:start; }
    .foot-title{ font-weight:800; color:var(--vx-ink); margin:0 0 6px; }
    .links{ padding:0; margin:0; list-style:none; }
    .links li+li{ margin-top:6px; }
    .links a,.email{ color:var(--vx-blue); text-decoration:none; }
    .links a:hover,.email:hover{ text-decoration:underline; }
    .foot-follow{ margin-top:12px; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .foot-follow a{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid var(--vx-line); background:#fff; color:var(--vx-blue); text-decoration:none; font-weight:700; }
    .foot-follow a:hover{ background:#eef5ff; }
    .foot-contacts address{ margin:8px 0 12px; line-height:1.65; font-style:normal; }
    .foot-contacts .email{ display:block; margin:6px 0 14px; }
    .foot-contacts .foot-title{ margin-top:14px; margin-bottom:6px; }
    .footer-bottom{ padding:10px 0 16px; text-align:center; color:#6b7a90; font-size:14px; }

    /* Mobile */
    @media (max-width:920px){
      .menu-toggle{ display:inline-flex; margin-left:auto; }
      .site-nav{ position:fixed; inset:68px 0 0 0; background:#fff; transform:translateX(100%); transition:transform .25s ease; border-top:1px solid var(--vx-line); padding:10px 0 24px; overflow:auto; }
      body.nav-open .site-nav{ transform:translateX(0%); }
      .menu{ flex-direction:column; align-items:stretch; gap:8px; padding:0 16px; }
      .menu>li>a:hover{ background:rgba(27,66,122,.06); text-decoration:none; }
      .vx-fab-desktop{ display:none; }
      .ai-inline{ display:block; }
      .dropdown-menu,.submenu{ position:static; transform:none; box-shadow:none; border:1px solid var(--vx-line); border-radius:10px; padding:8px; margin:6px 0 10px; display:none; }
      .dropdown.open>.dropdown-menu{ display:block; }
      .has-sub.open>.submenu{ display:block; }
    }
  </style>
</head>
<body>
  {% include header.html %}

  <main role="main">
    {{ content }}
  </main>

  {% include footer.html %}

  <script src="{{ '/assets/osx_widget.js?v=build-19' | relative_url }}" defer></script>
  <script>
    // Mobile nav + accessible dropdowns (same logic you had)
    (function () {
      const mqMobile = matchMedia('(max-width: 920px)');
      const body = document.body;
      const nav = document.getElementById('primary-nav');
      const toggle = document.querySelector('.menu-toggle');

      if (!nav || !toggle) return;

      toggle.addEventListener('click', () => {
        const open = body.classList.toggle('nav-open');
        toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && body.classList.contains('nav-open')) {
          body.classList.remove('nav-open');
          toggle.setAttribute('aria-expanded', 'false');
        }
      });

      // Tap-to-open dropdowns on mobile
      (function wireDropdowns() {
        const dropdownLinks = nav.querySelectorAll('.dropdown > .dropdown-link, .has-sub > .submenu-link');
        dropdownLinks.forEach(link => {
          link.addEventListener('click', (e) => {
            if (!mqMobile.matches) return; // desktop uses hover
            e.preventDefault();
            const parent = link.parentElement;
            const expanded = link.getAttribute('aria-expanded') === 'true';
            // close siblings
            Array.from(parent.parentElement.children).forEach(sib => {
              const a = sib.querySelector(':scope > .dropdown-link, :scope > .submenu-link');
              if (a && sib !== parent) {
                a.setAttribute('aria-expanded', 'false');
                sib.classList.remove('open');
              }
            });
            link.setAttribute('aria-expanded', expanded ? 'false' : 'true');
            parent.classList.toggle('open', !expanded);
          }, { passive: false });
        });
      })();

      // Close nav when clicking outside (mobile)
      document.addEventListener('click', (e) => {
        if (!body.classList.contains('nav-open')) return;
        if (!e.target.closest('.site-header')) {
          body.classList.remove('nav-open');
          toggle.setAttribute('aria-expanded', 'false');
        }
      });
    })();
  </script>
</body>
</html>
